# AUTOMATED MARIADB 10.1 (DOCKERIZED) INSTALLER FOR CENTOS7 / UBUNTU1604LTS

This script will install latest docker-ce, download mariadb 10.1 image, and configure it.

The internal directories in the container for database data and database config will be mapped to the following directory/files:

- /var/mariadb-storage/mariadb01/conf.d/server.cnf: Server configuration.
- /var/mariadb-storage/mariadb01/data/: Server data. Also, this directory will be symlinked to /var/lib/mysql.

If the script find a secondary free disk/volume, it will use it for the database storage. In such case, the volume will be mounted on "/var/mariadb-storage".

The credentials are autogenerated and later stored on the file /root/mariabd-access-info.txt. Also, the file /root/.my.cnf will be configured with the database root user credentials in order to let the "mysql" command to connect without including user/password on the mysql command call.

Please note that this script will disable selinux if the machine is a Centos 7.

**NOTE**: The "mariadb" dockerized service will run into a "systemd" unit called "docker-mariadb-server". You can use the standard "stop", "start", "restart", "status" commands with this unit in order to manage the mariadb service:

```bash
systemctl start docker-mariadb-server
systemctl restart docker-mariadb-server
systemctl stop docker-mariadb-server
systemctl status docker-mariadb-server
```

# PHPMYADMIN

PHPMyAdmin is included as an option controlled by the variable "phpmyadmin" at the begining of the script. By default, is set to "yes" (phpmyadmin and required dependencies will be installed). Setting this to "no" or any other value different to "yes" will make the script to not install phpmyadmin.


# FIREWALLD/UFW

Depenging on the distro (centos7 or ubuntu1604lts) firewalld/ufw will be installed and configured. The only ports to open will be:

- 22 tcp (ssh).
- 3306 tcp (mariadb).
- 80 and 443 tcp (http/https) "only" if phpmyadmin is installed.


# GENERAL REQUIREMENTS:

This script will fail if the following requirements are not meet:

- Operating System: Centos 7 or Ubuntu 16.04lts
- Architecture: x86_64/amd64.
- INSTALLED RAM: 1024Mb (1GB).
- CPU: 1 Core/Thread.
- FREE DISK SPACE: 5GB.
